<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-back-button icon="chevron-back-outline" text="" class="back-btn"></ion-back-button>
  <ion-avatar class="avatar active-effect">
    <img src="assets/img/avatar-people.svg">
    <span class="circle avatar-note"></span>
  </ion-avatar>

  <ion-backdrop *ngIf="!loadedChabad" class="backdrop-chabad"></ion-backdrop>

  <div class="img-container img-wrapper main-box-shadow"
    [style.background-image]="sanitizer.bypassSecurityTrustStyle(getChabadImageString())">
    <ion-spinner *ngIf="!chabad.thumb_image" class="absolute-center" name="lines"></ion-spinner>
  </div>
</ion-content>

<ion-footer class="ion-no-border">
  <ion-item-group class="segment">
    <div class="background-high"></div>

    <ion-buttons class="date-list">
      <ion-buttons *ngFor="let dateItem of dateList" class="date-item main-box-shadow" [ngClass]="{'active-date-item': activeDateItem == dateItem.id}"
        (click)="changeDateItem(dateItem)">
        <span>{{ DAY[dateItem.day.getDay()].substring(0, 3) }}</span>
        <span>{{ dateItem.day.getDate() }}</span>
        <span *ngIf="dateItem.events.length != 0" class="circle date-item-note"></span>
      </ion-buttons>
    </ion-buttons>

    <p class="today">{{ getDayString(currentDay) }}</p>

    <ion-item-group *ngFor="let dateItem of dateList" class="btn-all-list">
      <ion-item-group *ngIf="dateItem.events.length != 0 && activeDateItem == dateItem.id"
        class="btn-join btn-join-all active-effect" (click)="toggleJoiningAll(dateItem)">
        <span *ngIf="!joinedAll(dateItem)">Join all</span>
        <ion-icon *ngIf="joinedAll(dateItem)" name="checkmark-outline"></ion-icon>
      </ion-item-group>
    </ion-item-group>

    <ion-list style="background: '#eee';">
      <ion-item-group *ngIf="dateList[activeDateItem].events.length != 0">
        <ion-list class="event-body">
          <ion-item-group *ngFor="let event of dateList[activeDateItem].events" class="event"
            [style.background]="event.color" (click)="goToEventDetail(event)">
            <ion-buttons class="ion-align-items-start ion-justify-content-between">
              <h3 class="event-name">Event {{ event.id }}</h3>
              <ion-item-group class="btn-join btn-join-event active-effect" [style.color]="event.color" (click)="toggleJoiningEvent(event)">
                <span *ngIf="!event.joined">Join</span>
                <ion-icon *ngIf="event.joined" name="checkmark-outline"></ion-icon>
              </ion-item-group>
            </ion-buttons>
            <span class="event-time">{{ event.range_time.substring(0, 5) }} - {{ event.range_time.substring(7, 13)
              }}</span>
            <p class="text three-dots-2 event-desc">{{ event.description }}</p>

            <img src="assets/icon/three-dots.svg" class="three-dots-icon">
          </ion-item-group>
        </ion-list>
      </ion-item-group>
    </ion-list>
  </ion-item-group>
</ion-footer>